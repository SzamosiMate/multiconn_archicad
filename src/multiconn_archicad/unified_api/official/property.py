# This file is automatically generated by the build system.
# Do not edit this file directly.

from __future__ import annotations
from typing import TYPE_CHECKING

from multiconn_archicad.models.official.commands import (
    GetAllPropertyGroupIdsParameters,
    GetAllPropertyGroupIdsResult,
    GetAllPropertyIdsOfElementsParameters,
    GetAllPropertyIdsOfElementsResult,
    GetAllPropertyIdsParameters,
    GetAllPropertyIdsResult,
    GetAllPropertyNamesResult,
    GetDetailsOfPropertiesParameters,
    GetDetailsOfPropertiesResult,
    GetPropertyDefinitionAvailabilityParameters,
    GetPropertyDefinitionAvailabilityResult,
    GetPropertyGroupsParameters,
    GetPropertyGroupsResult,
    GetPropertyIdsParameters,
    GetPropertyIdsResult,
    GetPropertyValuesOfElementsParameters,
    GetPropertyValuesOfElementsResult,
    SetPropertyValuesOfElementsParameters,
    SetPropertyValuesOfElementsResult,
)
from multiconn_archicad.models.official.types import (
    BuiltInPropertyUserId,
    ElementIdArrayItem,
    ElementPropertyValue,
    ErrorItem,
    FailedExecutionResult,
    PropertyDefinitionAvailabilityWrapperItem,
    PropertyDefinitionWrapperItem,
    PropertyGroupIdArrayItem,
    PropertyGroupWrapperItem,
    PropertyIdArrayItem,
    PropertyIdsOfElementWrapperItem,
    PropertyType,
    PropertyValuesWrapperItem,
    SuccessfulExecutionResult,
    UserDefinedPropertyUserId,
)

if TYPE_CHECKING:
    from multiconn_archicad.core.core_commands import CoreCommands


class PropertyCommands:
    def __init__(self, core: CoreCommands):
        self._core = core

    def get_all_property_group_ids(self, property_type: None | PropertyType = None) -> list[PropertyGroupIdArrayItem]:
        """
        Returns the identifier of every property group in the current plan. The optional
        propertyType parameter can be used to filter the results based on the type of the
        property group (Built-in or User Defined).

        Args:
            property_type (None | PropertyType)

        Returns:
            list[PropertyGroupIdArrayItem]: A list of property group identifiers.

        Raises:
            ArchicadAPIError: If the API returns an error response.
            RequestError: If there is a network or connection error.
            pydantic.ValidationError: If the parameters, or the API Response fail validation.
        """
        params_dict = {
            "propertyType": property_type,
        }
        validated_params = GetAllPropertyGroupIdsParameters(**params_dict)
        response_dict = self._core.post_command(
            "API.GetAllPropertyGroupIds", validated_params.model_dump(mode="json", by_alias=True, exclude_none=True)
        )
        validated_response = GetAllPropertyGroupIdsResult.model_validate(response_dict)
        return validated_response.propertyGroupIds

    def get_all_property_ids(self, property_type: None | PropertyType = None) -> list[PropertyIdArrayItem]:
        """
        Returns the identifier of every property in the current plan. The optional propertyType
        parameter can be used to filter the results based on the type of the property (Built-in
        or User Defined).

        Args:
            property_type (None | PropertyType)

        Returns:
            list[PropertyIdArrayItem]: A list of property identifiers.

        Raises:
            ArchicadAPIError: If the API returns an error response.
            RequestError: If there is a network or connection error.
            pydantic.ValidationError: If the parameters, or the API Response fail validation.
        """
        params_dict = {
            "propertyType": property_type,
        }
        validated_params = GetAllPropertyIdsParameters(**params_dict)
        response_dict = self._core.post_command(
            "API.GetAllPropertyIds", validated_params.model_dump(mode="json", by_alias=True, exclude_none=True)
        )
        validated_response = GetAllPropertyIdsResult.model_validate(response_dict)
        return validated_response.propertyIds

    def get_all_property_ids_of_elements(
        self, elements: list[ElementIdArrayItem], property_type: None | PropertyType = None
    ) -> list[ErrorItem | PropertyIdsOfElementWrapperItem]:
        """
        Returns all property identifiers of the given elements. The optional propertyType
        parameter can be used to filter the results based on the type of the property (Built-in
        or User Defined).

        Args:
            elements (list[ElementIdArrayItem]): A list of elements.
            property_type (None | PropertyType)

        Returns:
            list[ErrorItem | PropertyIdsOfElementWrapperItem]: A list of property identifiers of
                elements or errors.

        Raises:
            ArchicadAPIError: If the API returns an error response.
            RequestError: If there is a network or connection error.
            pydantic.ValidationError: If the parameters, or the API Response fail validation.
        """
        params_dict = {
            "elements": elements,
            "propertyType": property_type,
        }
        validated_params = GetAllPropertyIdsOfElementsParameters(**params_dict)
        response_dict = self._core.post_command(
            "API.GetAllPropertyIdsOfElements",
            validated_params.model_dump(mode="json", by_alias=True, exclude_none=True),
        )
        validated_response = GetAllPropertyIdsOfElementsResult.model_validate(response_dict)
        return validated_response.propertyIdsOfElements

    def get_all_property_names(self) -> list[BuiltInPropertyUserId | UserDefinedPropertyUserId]:
        """
        Returns the human-readable names of available Property definitions for debug and
        development purposes.

        Returns:
            list[BuiltInPropertyUserId | UserDefinedPropertyUserId]: A list of PropertyUserId
                objects.

        Raises:
            ArchicadAPIError: If the API returns an error response.
            RequestError: If there is a network or connection error.
            pydantic.ValidationError: If the parameters, or the API Response fail validation.
        """
        response_dict = self._core.post_command("API.GetAllPropertyNames")
        validated_response = GetAllPropertyNamesResult.model_validate(response_dict)
        return validated_response.properties

    def get_details_of_properties(
        self, properties: list[PropertyIdArrayItem]
    ) -> list[ErrorItem | PropertyDefinitionWrapperItem]:
        """
        Returns the details of property definitions.

        Args:
            properties (list[PropertyIdArrayItem]): A list of property identifiers.

        Returns:
            list[ErrorItem | PropertyDefinitionWrapperItem]: A list of property definitions or
                errors.

        Raises:
            ArchicadAPIError: If the API returns an error response.
            RequestError: If there is a network or connection error.
            pydantic.ValidationError: If the parameters, or the API Response fail validation.
        """
        params_dict = {
            "properties": properties,
        }
        validated_params = GetDetailsOfPropertiesParameters(**params_dict)
        response_dict = self._core.post_command(
            "API.GetDetailsOfProperties", validated_params.model_dump(mode="json", by_alias=True, exclude_none=True)
        )
        validated_response = GetDetailsOfPropertiesResult.model_validate(response_dict)
        return validated_response.propertyDefinitions

    def get_property_definition_availability(
        self, property_ids: list[PropertyIdArrayItem]
    ) -> list[ErrorItem | PropertyDefinitionAvailabilityWrapperItem]:
        """
        Returns the ids of classification items a given property definition is available for.

        Args:
            property_ids (list[PropertyIdArrayItem]): A list of property identifiers.

        Returns:
            list[ErrorItem | PropertyDefinitionAvailabilityWrapperItem]: A list of
                classification item avalabilities.

        Raises:
            ArchicadAPIError: If the API returns an error response.
            RequestError: If there is a network or connection error.
            pydantic.ValidationError: If the parameters, or the API Response fail validation.
        """
        params_dict = {
            "propertyIds": property_ids,
        }
        validated_params = GetPropertyDefinitionAvailabilityParameters(**params_dict)
        response_dict = self._core.post_command(
            "API.GetPropertyDefinitionAvailability",
            validated_params.model_dump(mode="json", by_alias=True, exclude_none=True),
        )
        validated_response = GetPropertyDefinitionAvailabilityResult.model_validate(response_dict)
        return validated_response.propertyDefinitionAvailabilityList

    def get_property_groups(
        self, property_group_ids: list[PropertyGroupIdArrayItem]
    ) -> list[ErrorItem | PropertyGroupWrapperItem]:
        """
        Returns the details of property groups.

        Args:
            property_group_ids (list[PropertyGroupIdArrayItem]): A list of property group
                identifiers.

        Returns:
            list[ErrorItem | PropertyGroupWrapperItem]: A list of property groups or errors.

        Raises:
            ArchicadAPIError: If the API returns an error response.
            RequestError: If there is a network or connection error.
            pydantic.ValidationError: If the parameters, or the API Response fail validation.
        """
        params_dict = {
            "propertyGroupIds": property_group_ids,
        }
        validated_params = GetPropertyGroupsParameters(**params_dict)
        response_dict = self._core.post_command(
            "API.GetPropertyGroups", validated_params.model_dump(mode="json", by_alias=True, exclude_none=True)
        )
        validated_response = GetPropertyGroupsResult.model_validate(response_dict)
        return validated_response.propertyGroups

    def get_property_ids(
        self, properties: list[BuiltInPropertyUserId | UserDefinedPropertyUserId]
    ) -> list[ErrorItem | PropertyIdArrayItem]:
        """
        Returns the identifiers of property definitions for the requested property names.

        Args:
            properties (list[BuiltInPropertyUserId | UserDefinedPropertyUserId]): List of
                property names whose ids are requested.

        Returns:
            list[ErrorItem | PropertyIdArrayItem]: List of the ids of the requested properties.
                Order of the ids are the same as in the input. Existing properties are
                represented by propertyId objects, non-existing properties are represented by
                error objects.

        Raises:
            ArchicadAPIError: If the API returns an error response.
            RequestError: If there is a network or connection error.
            pydantic.ValidationError: If the parameters, or the API Response fail validation.
        """
        params_dict = {
            "properties": properties,
        }
        validated_params = GetPropertyIdsParameters(**params_dict)
        response_dict = self._core.post_command(
            "API.GetPropertyIds", validated_params.model_dump(mode="json", by_alias=True, exclude_none=True)
        )
        validated_response = GetPropertyIdsResult.model_validate(response_dict)
        return validated_response.properties

    def get_property_values_of_elements(
        self, elements: list[ElementIdArrayItem], properties: list[PropertyIdArrayItem]
    ) -> list[ErrorItem | PropertyValuesWrapperItem]:
        """
        Returns the property values of the elements for the given property.

        Args:
            elements (list[ElementIdArrayItem]): A list of elements.
            properties (list[PropertyIdArrayItem]): A list of property identifiers.

        Returns:
            list[ErrorItem | PropertyValuesWrapperItem]: List of property value lists. The order
                of the outer list is that of the given elements. The order of the inner lists
                are that of the given properties.

        Raises:
            ArchicadAPIError: If the API returns an error response.
            RequestError: If there is a network or connection error.
            pydantic.ValidationError: If the parameters, or the API Response fail validation.
        """
        params_dict = {
            "elements": elements,
            "properties": properties,
        }
        validated_params = GetPropertyValuesOfElementsParameters(**params_dict)
        response_dict = self._core.post_command(
            "API.GetPropertyValuesOfElements",
            validated_params.model_dump(mode="json", by_alias=True, exclude_none=True),
        )
        validated_response = GetPropertyValuesOfElementsResult.model_validate(response_dict)
        return validated_response.propertyValuesForElements

    def set_property_values_of_elements(
        self, element_property_values: list[ElementPropertyValue]
    ) -> list[FailedExecutionResult | SuccessfulExecutionResult]:
        """
        Sets the property values of elements.

        Args:
            element_property_values (list[ElementPropertyValue]): A list of element property
                values.

        Returns:
            list[FailedExecutionResult | SuccessfulExecutionResult]: A list of execution
                results.

        Raises:
            ArchicadAPIError: If the API returns an error response.
            RequestError: If there is a network or connection error.
            pydantic.ValidationError: If the parameters, or the API Response fail validation.
        """
        params_dict = {
            "elementPropertyValues": element_property_values,
        }
        validated_params = SetPropertyValuesOfElementsParameters(**params_dict)
        response_dict = self._core.post_command(
            "API.SetPropertyValuesOfElements",
            validated_params.model_dump(mode="json", by_alias=True, exclude_none=True),
        )
        validated_response = SetPropertyValuesOfElementsResult.model_validate(response_dict)
        return validated_response.executionResults
